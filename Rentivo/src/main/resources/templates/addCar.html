<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Car</title>
    <!-- Bootstrap CSS from CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdlZxMi5huqgSBXg"
          crossorigin="anonymous">
    <style>
        /* Minimal custom CSS for image preview */
        #image-preview {
            max-height: 250px;
<!--            overflow: hidden;-->
            border: 1px solid #ccc;
            border-radius: 0.375rem;
            margin-top: 0.5rem;
        }

        #image-preview img {
            max-width: 100%;
            max-height: 250px;
            width: 100%;
            height: auto;
            object-fit: contain;
            border-radius: 0.375rem;
        }
    </style>
</head>

<body>
<div layout:fragment="content">
    <div class="container mt-5">
        <div class="card p-4 shadow-sm" style="max-width: 600px; margin: auto;">
            <h2 class="card-title text-center mb-4" style="color: #03376e;">Add Car</h2>
            <form th:action="@{/admin/addCar}" th:object="${car}" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="model" class="form-label">Model:</label>
                    <input type="text" id="model" name="model" th:field="*{model}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="type" class="form-label">Type:</label>
                    <input type="text" id="type" name="type" th:field="*{type}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="price" class="form-label">Price:</label>
                    <input type="number" id="price" name="price" th:field="*{price}" class="form-control" required>
                </div>
                <div class="mb-3">
                    <label for="image" class="form-label">Image:</label>
                    <input type="file" id="image" name="image" accept="image/*" class="form-control" required onchange="previewImage(event)">
                    <div id="image-preview" class="mt-2"></div>
                </div>
                <div class="mb-3">
                    <label for="status" class="form-label">Status:</label>
                    <select id="status" name="status" th:field="*{status}" class="form-select">
                        <option value="AVAILABLE">Available</option>
                        <option value="RENTED">Rented</option>
                        <option value="MAINTENANCE">Maintenance</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary w-100">Add Car</button>
            </form>
        </div>
    </div>

    <script>
        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function () {
                const img = document.createElement('img');
                img.src = reader.result;
                img.classList.add('img-fluid', 'rounded'); // Bootstrap classes
                const preview = document.getElementById('image-preview');
                preview.innerHTML = '';
                preview.appendChild(img);
            };
            if (event.target.files[0]) {
                reader.readAsDataURL(event.target.files[0]);
            }
        }
    </script>

    <!-- Bootstrap JS from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdlZxMi5huqgSBXg"
            crossorigin="anonymous"></script>
</div>
</body>
</html>